<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FifthKeys Admin | Analytics</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@lucide/web/dist/umd/lucide.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="light-mode">
    <div class="admin-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <a href="index.html">
                        <img src="../landing-page/assets/fifthkeys-logo.svg" alt="FifthKeys Logo" class="logo-light">
                        <img src="../landing-page/assets/fifthkeys-logo-dark.svg" alt="FifthKeys Logo" class="logo-dark">
                    </a>
                </div>
                <button class="sidebar-close" aria-label="Close sidebar">
                    <i data-lucide="x"></i>
                </button>
            </div>
            
            <nav class="sidebar-nav">
                <ul>
                    <li class="nav-item">
                        <a href="index.html">
                            <i data-lucide="layout-dashboard"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="leads.html">
                            <i data-lucide="users"></i>
                            <span>Lead Management</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="demos.html">
                            <i data-lucide="calendar"></i>
                            <span>Demo Bookings</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="onboarding.html">
                            <i data-lucide="clipboard-check"></i>
                            <span>Onboarding</span>
                        </a>
                    </li>
                    <li class="nav-item active">
                        <a href="analytics.html">
                            <i data-lucide="bar-chart-2"></i>
                            <span>Analytics</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="settings.html">
                            <i data-lucide="settings"></i>
                            <span>Settings</span>
                        </a>
                    </li>
                </ul>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">
                        <img src="assets/user-avatar.jpg" alt="User Avatar">
                    </div>
                    <div class="user-details">
                        <h4>Sarah Johnson</h4>
                        <p>Sales Manager</p>
                    </div>
                </div>
                <button class="logout-btn">
                    <i data-lucide="log-out"></i>
                    <span>Logout</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="sidebar-toggle" aria-label="Toggle sidebar">
                        <i data-lucide="menu"></i>
                    </button>
                    <h1 class="page-title">Analytics</h1>
                </div>
                <div class="header-right">
                    <div class="search-bar">
                        <i data-lucide="search"></i>
                        <input type="text" placeholder="Search...">
                    </div>
                    <div class="header-actions">
                        <button class="action-btn" aria-label="Notifications">
                            <i data-lucide="bell"></i>
                            <span class="badge">3</span>
                        </button>
                        <button class="action-btn" aria-label="Messages">
                            <i data-lucide="message-square"></i>
                            <span class="badge">5</span>
                        </button>
                        <button id="themeToggle" class="action-btn" aria-label="Toggle dark mode">
                            <i data-lucide="sun" class="light-icon"></i>
                            <i data-lucide="moon" class="dark-icon"></i>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Analytics Content -->
            <div class="analytics-container">
                <!-- Date Range Selector -->
                <div class="analytics-header">
                    <div class="analytics-title">
                        <h2>Sales Performance</h2>
                        <p>Track your team's performance and conversion metrics</p>
                    </div>
                    <div class="date-range-selector">
                        <button class="date-range-btn active">Last 30 Days</button>
                        <button class="date-range-btn">Last Quarter</button>
                        <button class="date-range-btn">Year to Date</button>
                        <button class="date-range-btn custom">
                            <i data-lucide="calendar"></i>
                            Custom Range
                        </button>
                    </div>
                </div>

                <!-- Key Metrics -->
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-icon" style="background-color: rgba(59, 130, 246, 0.1);">
                            <i data-lucide="users" style="color: #3B82F6;"></i>
                        </div>
                        <div class="metric-content">
                            <h3>Total Leads</h3>
                            <div class="metric-value">1,482</div>
                            <div class="metric-trend positive">
                                <i data-lucide="trending-up"></i>
                                <span>12.5% from last period</span>
                            </div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon" style="background-color: rgba(16, 185, 129, 0.1);">
                            <i data-lucide="calendar-check" style="color: #10B981;"></i>
                        </div>
                        <div class="metric-content">
                            <h3>Demo Bookings</h3>
                            <div class="metric-value">284</div>
                            <div class="metric-trend positive">
                                <i data-lucide="trending-up"></i>
                                <span>8.2% from last period</span>
                            </div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon" style="background-color: rgba(245, 158, 11, 0.1);">
                            <i data-lucide="percent" style="color: #F59E0B;"></i>
                        </div>
                        <div class="metric-content">
                            <h3>Conversion Rate</h3>
                            <div class="metric-value">19.2%</div>
                            <div class="metric-trend positive">
                                <i data-lucide="trending-up"></i>
                                <span>2.1% from last period</span>
                            </div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon" style="background-color: rgba(239, 68, 68, 0.1);">
                            <i data-lucide="dollar-sign" style="color: #EF4444;"></i>
                        </div>
                        <div class="metric-content">
                            <h3>Revenue Pipeline</h3>
                            <div class="metric-value">$1.8M</div>
                            <div class="metric-trend negative">
                                <i data-lucide="trending-down"></i>
                                <span>3.4% from last period</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main Charts -->
                <div class="analytics-charts">
                    <div class="chart-card large">
                        <div class="card-header">
                            <h3>Sales Pipeline Trend</h3>
                            <div class="card-actions">
                                <button class="btn btn-sm btn-outline">
                                    <i data-lucide="download"></i>
                                    Export
                                </button>
                                <button class="btn btn-sm btn-icon">
                                    <i data-lucide="more-horizontal"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card-content">
                            <canvas id="salesPipelineChart" height="300"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Analytics Grid -->
                <div class="analytics-grid">
                    <div class="chart-card">
                        <div class="card-header">
                            <h3>Lead Sources</h3>
                            <div class="card-actions">
                                <button class="btn btn-sm btn-icon">
                                    <i data-lucide="more-horizontal"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card-content">
                            <canvas id="leadSourcesAnalyticsChart" height="250"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="card-header">
                            <h3>Conversion Funnel</h3>
                            <div class="card-actions">
                                <button class="btn btn-sm btn-icon">
                                    <i data-lucide="more-horizontal"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card-content">
                            <canvas id="conversionFunnelChart" height="250"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="card-header">
                            <h3>Sales by Property Type</h3>
                            <div class="card-actions">
                                <button class="btn btn-sm btn-icon">
                                    <i data-lucide="more-horizontal"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card-content">
                            <canvas id="propertyTypeChart" height="250"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="card-header">
                            <h3>Regional Performance</h3>
                            <div class="card-actions">
                                <button class="btn btn-sm btn-icon">
                                    <i data-lucide="more-horizontal"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card-content">
                            <canvas id="regionalPerformanceChart" height="250"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Team Performance -->
                <div class="card">
                    <div class="card-header">
                        <h3>Team Performance</h3>
                        <div class="card-actions">
                            <button class="btn btn-sm btn-outline">
                                <i data-lucide="download"></i>
                                Export
                            </button>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="team-performance-table-container">
                            <table class="team-performance-table">
                                <thead>
                                    <tr>
                                        <th>Team Member</th>
                                        <th>Leads</th>
                                        <th>Demos</th>
                                        <th>Conversion</th>
                                        <th>Revenue</th>
                                        <th>Avg. Deal Size</th>
                                        <th>Trend</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>
                                            <div class="team-member-info">
                                                <img src="assets/user-avatar.jpg" alt="Sarah Johnson">
                                                <span>Sarah Johnson</span>
                                            </div>
                                        </td>
                                        <td>385</td>
                                        <td>65</td>
                                        <td>16.9%</td>
                                        <td>$450,000</td>
                                        <td>$32,142</td>
                                        <td>
                                            <div class="trend-chart">
                                                <canvas id="trendChart1" height="40"></canvas>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="team-member-info">
                                                <img src="assets/michael-avatar.jpg" alt="Michael Chen">
                                                <span>Michael Chen</span>
                                            </div>
                                        </td>
                                        <td>312</td>
                                        <td>59</td>
                                        <td>18.9%</td>
                                        <td>$520,000</td>
                                        <td>$38,235</td>
                                        <td>
                                            <div class="trend-chart">
                                                <canvas id="trendChart2" height="40"></canvas>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="team-member-info">
                                                <img src="assets/elena-avatar.jpg" alt="Elena Rodriguez">
                                                <span>Elena Rodriguez</span>
                                            </div>
                                        </td>
                                        <td>425</td>
                                        <td>80</td>
                                        <td>18.8%</td>
                                        <td>$610,000</td>
                                        <td>$35,882</td>
                                        <td>
                                            <div class="trend-chart">
                                                <canvas id="trendChart3" height="40"></canvas>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="team-member-info">
                                                <img src="assets/david-avatar.jpg" alt="David Wilson">
                                                <span>David Wilson</span>
                                            </div>
                                        </td>
                                        <td>360</td>
                                        <td>81</td>
                                        <td>22.5%</td>
                                        <td>$580,000</td>
                                        <td>$29,000</td>
                                        <td>
                                            <div class="trend-chart">
                                                <canvas id="trendChart4" height="40"></canvas>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="team-member-info">
                                                <img src="assets/alex-avatar.jpg" alt="Alex Thompson">
                                                <span>Alex Thompson</span>
                                            </div>
                                        </td>
                                        <td>290</td>
                                        <td>56</td>
                                        <td>19.3%</td>
                                        <td>$420,000</td>
                                        <td>$33,600</td>
                                        <td>
                                            <div class="trend-chart">
                                                <canvas id="trendChart5" height="40"></canvas>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="scripts.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize analytics charts
            initAnalyticsCharts();
        });

        function initAnalyticsCharts() {
            // Get theme colors based on current mode
            const isDarkMode = document.body.classList.contains('dark-mode');
            const textColor = isDarkMode ? '#f9fafb' : '#111827';
            const gridColor = isDarkMode ? '#374151' : '#e5e7eb';
            const primaryColor = '#3b82f6';
            const secondaryColor = '#10b981';
            const warningColor = '#f59e0b';
            const dangerColor = '#ef4444';
            const purpleColor = '#8b5cf6';
            
            // Sales Pipeline Chart
            const salesPipelineCtx = document.getElementById('salesPipelineChart');
            if (salesPipelineCtx) {
                new Chart(salesPipelineCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                        datasets: [
                            {
                                label: 'New Leads',
                                data: [120, 145, 132, 158, 180, 195, 210, 240, 225, 260, 278, 295],
                                borderColor: primaryColor,
                                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                tension: 0.4,
                                fill: true
                            },
                            {
                                label: 'Qualified Leads',
                                data: [80, 95, 85, 110, 130, 145, 160, 180, 170, 200, 210, 230],
                                borderColor: secondaryColor,
                                backgroundColor: 'rgba(16, 185, 129, 0.1)',
                                tension: 0.4,
                                fill: true
                            },
                            {
                                label: 'Closed Deals',
                                data: [20, 25, 22, 30, 35, 40, 45, 50, 48, 55, 60, 65],
                                borderColor: warningColor,
                                backgroundColor: 'rgba(245, 158, 11, 0.1)',
                                tension: 0.4,
                                fill: true
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: {
                                    color: textColor
                                }
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false
                            }
                        },
                        scales: {
                            x: {
                                grid: {
                                    color: gridColor
                                },
                                ticks: {
                                    color: textColor
                                }
                            },
                            y: {
                                grid: {
                                    color: gridColor
                                },
                                ticks: {
                                    color: textColor
                                }
                            }
                        }
                    }
                });
            }
            
            // Lead Sources Chart
            const leadSourcesCtx = document.getElementById('leadSourcesAnalyticsChart');
            if (leadSourcesCtx) {
                new Chart(leadSourcesCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Website', 'Referrals', 'Social Media', 'Email', 'Events'],
                        datasets: [{
                            data: [35, 25, 20, 15, 5],
                            backgroundColor: [
                                primaryColor,
                                secondaryColor,
                                warningColor,
                                dangerColor,
                                purpleColor
                            ],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    color: textColor,
                                    padding: 20,
                                    font: {
                                        size: 12
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            // Conversion Funnel Chart
            const conversionFunnelCtx = document.getElementById('conversionFunnelChart');
            if (conversionFunnelCtx) {
                new Chart(conversionFunnelCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Leads', 'Qualified', 'Demo', 'Proposal', 'Negotiation', 'Closed'],
                        datasets: [{
                            label: 'Conversion Funnel',
                            data: [1482, 890, 534, 320, 192, 115],
                            backgroundColor: [
                                primaryColor,
                                '#4f8df9',
                                '#63a1fa',
                                '#77b5fb',
                                '#8bc9fc',
                                '#9fddfd'
                            ],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        indexAxis: 'y',
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            x: {
                                grid: {
                                    color: gridColor
                                },
                                ticks: {
                                    color: textColor
                                }
                            },
                            y: {
                                grid: {
                                    color: gridColor
                                },
                                ticks: {
                                    color: textColor
                                }
                            }
                        }
                    }
                });
            }
            
            // Property Type Chart
            const propertyTypeCtx = document.getElementById('propertyTypeChart');
            if (propertyTypeCtx) {
                new Chart(propertyTypeCtx, {
                    type: 'pie',
                    data: {
                        labels: ['Hotels', 'Resorts', 'Boutique', 'Hostels', 'Vacation Rentals'],
                        datasets: [{
                            data: [45, 25, 15, 10, 5],
                            backgroundColor: [
                                primaryColor,
                                secondaryColor,
                                warningColor,
                                dangerColor,
                                purpleColor
                            ],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    color: textColor,
                                    padding: 20,
                                    font: {
                                        size: 12
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            // Regional Performance Chart
            const regionalPerformanceCtx = document.getElementById('regionalPerformanceChart');
            if (regionalPerformanceCtx) {
                new Chart(regionalPerformanceCtx, {
                    type: 'bar',
                    data: {
                        labels: ['West', 'Northeast', 'Midwest', 'South', 'International'],
                        datasets: [{
                            label: 'Revenue',
                            data: [580000, 420000, 320000, 380000, 100000],
                            backgroundColor: primaryColor
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            x: {
                                grid: {
                                    color: gridColor
                                },
                                ticks: {
                                    color: textColor
                                }
                            },
                            y: {
                                grid: {
                                    color: gridColor
                                },
                                ticks: {
                                    color: textColor
                                }
                            }
                        }
                    }
                });
            }
            
            // Trend Charts for Team Performance
            const trendChartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        enabled: false
                    }
                },
                scales: {
                    x: {
                        display: false
                    },
                    y: {
                        display: false
                    }
                },
                elements: {
                    point: {
                        radius: 0
                    },
                    line: {
                        tension: 0.4
                    }
                }
            };
            
            // Trend Chart 1
            const trendChart1Ctx = document.getElementById('trendChart1');
            if (trendChart1Ctx) {
                new Chart(trendChart1Ctx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            data: [30, 40, 35, 50, 49, 60],
                            borderColor: primaryColor,
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            fill: true
                        }]
                    },
                    options: trendChartOptions
                });
            }
            
            // Trend Chart 2
            const trendChart2Ctx = document.getElementById('trendChart2');
            if (trendChart2Ctx) {
                new Chart(trendChart2Ctx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            data: [40, 30, 45, 55, 70, 65],
                            borderColor: secondaryColor,
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            fill: true
                        }]
                    },
                    options: trendChartOptions
                });
            }
            
            // Trend Chart 3
            const trendChart3Ctx = document.getElementById('trendChart3');
            if (trendChart3Ctx) {
                new Chart(trendChart3Ctx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            data: [50, 60, 55, 65, 70, 80],
                            borderColor: warningColor,
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            fill: true
                        }]
                    },
                    options: trendChartOptions
                });
            }
            
            // Trend Chart 4
            const trendChart4Ctx = document.getElementById('trendChart4');
            if (trendChart4Ctx) {
                new Chart(trendChart4Ctx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            data: [60, 65, 55, 50, 70, 75],
                            borderColor: dangerColor,
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            fill: true
                        }]
                    },
                    options: trendChartOptions
                });
            }
            
            // Trend Chart 5
            const trendChart5Ctx = document.getElementById('trendChart5');
            if (trendChart5Ctx) {
                new Chart(trendChart5Ctx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            data: [35, 40, 45, 40, 50, 55],
                            borderColor: purpleColor,
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            fill: true
                        }]
                    },
                    options: trendChartOptions
                });
            }
        }
    </script>
</body>
</html>
